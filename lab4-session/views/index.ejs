<!DOCTYPE html>
<html lang="en">
  <head>
      <% include partials/head %>
  </head>
  <body class="container">
    <div class="col-md-6 col-md-offset-3">
      <h1>Hello <%=name %></h1>
      <br/>
      <button class="btn btn-danger" href="/logout" onClick='document.location.href="/logout"'>
        Logout
      </button>
      <br/><br/><br/>
      <h3>Your metrics : </h3>
      <div id="metrics"></div>
    </div>
    <ul>
      <script>
        $.getJSON("/metrics/<%= name %>", {}, (data) => {
          const content = data.map(d => {
            return '<li> timestamp: '+d.timestamp+', value: '+d.value+'</li>';
          })
          $('#metrics').append(content.join("\n"));
        });
      </script>
    </ul>

    <h5>What do you want to do ?</h5>

    <form action="/add" method="post">
      <div class="form-group">
        <label for="form_timestamp">Timestamp : </label>
        <input id="form_timestamp" type="text" placeholder="Enter a positif number" name="timestamp" />
        <label for="form_timestamp">, Value: </label>
        <input id="form_timestamp" type="text" placeholder="Enter a number" name="value" />
        <button class="btn btn-success " type="submit" value="Submit">Add/update a metric</button>
      </div>
    </form>

    <form action="/delete" method="post">
      <div class="form-group">
        <label for="form_timestamp">Timestamp : </label>
        <input id="form_timestamp" type="text" placeholder="Enter a positif number" name="timestamp" />
        <button class="btn btn-success" type="submit" value="Submit">Delete a metric</button>
      </div>
    </form>


  </body>
</html>
